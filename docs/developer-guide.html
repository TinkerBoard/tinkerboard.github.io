<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-developer-guide" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.0.1">
<title data-rh="true">Developer Guide | ASUS Tinker Board Series Documentation</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://tinkerboard.github.io/img/tinker_board-logo.png"><meta data-rh="true" name="twitter:image" content="https://tinkerboard.github.io/img/tinker_board-logo.png"><meta data-rh="true" property="og:url" content="https://tinkerboard.github.io/docs/developer-guide"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Developer Guide | ASUS Tinker Board Series Documentation"><meta data-rh="true" name="description" content="Source control tools"><meta data-rh="true" property="og:description" content="Source control tools"><link data-rh="true" rel="icon" href="/img/tinker_board-favicon.png"><link data-rh="true" rel="canonical" href="https://tinkerboard.github.io/docs/developer-guide"><link data-rh="true" rel="alternate" href="https://tinkerboard.github.io/docs/developer-guide" hreflang="en"><link data-rh="true" rel="alternate" href="https://tinkerboard.github.io/docs/developer-guide" hreflang="x-default"><link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="ASUS Tinker Board Series Documentation RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="ASUS Tinker Board Series Documentation Atom Feed"><link rel="stylesheet" href="/assets/css/styles.4d6325bf.css">
<script src="/assets/js/runtime~main.697006f7.js" defer="defer"></script>
<script src="/assets/js/main.a7a16e3e.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/tinker_board-logo.png" alt="ASUS Tinker Board Series Documentation Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/img/tinker_board-logo.png" alt="ASUS Tinker Board Series Documentation Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">ASUS Tinker Board Series Documentation</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/getting-started">Getting Started</a><a class="navbar__item navbar__link" href="/blog">Blog</a></div><div class="navbar__items navbar__items--right"><a href="https://tinker-board.asus.com" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Tinker Board Website<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="navbarSearchContainer_Bca1"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/getting-started">Getting Started</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/category/products">Products</a><button aria-label="Expand sidebar category &#x27;Products&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/user-guide">User Guide</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" href="/docs/developer-guide">Developer Guide</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/tinker-os-releases">Tinker OS Releases</a></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Developer Guide</span><meta itemprop="position" content="1"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><h1>Developer Guide</h1>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="source-control-tools">Source control tools<a href="#source-control-tools" class="hash-link" aria-label="Direct link to Source control tools" title="Direct link to Source control tools">​</a></h2>
<p>Working with Tinker Board series code requires using both Git (an open-source version-control system) and Repo (a Google-built repository-management tool that runs on top of Git). We refer to how Android does for <a href="https://source.android.com/docs/setup/download" target="_blank" rel="noopener noreferrer">Source control tools</a>.</p>
<p>Please refer to <a href="https://source.android.com/setup/develop#installing-repo" target="_blank" rel="noopener noreferrer">Installing Repo</a> to install the Repo Launcher.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="downloading-the-source">Downloading the source<a href="#downloading-the-source" class="hash-link" aria-label="Direct link to Downloading the source" title="Direct link to Downloading the source">​</a></h2>
<p>Since Tinker Board series code is organized in the same way as how Android code is done, please refer to <a href="https://source.android.com/setup/build/downloading" target="_blank" rel="noopener noreferrer">Downloading the Source</a> to understand how to download the Android code for more information.</p>
<p>There are branches for different products and manifests for different releases in Tinker Board series code.</p>
<p>For Tinker OS Debian and Yocto:</p>
<p>To check out the latest code for a product, please run the following command and use the branch name for that product as REVISION.</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">repo init -u https://github.com/TinkerBoard-Linux/rockchip-linux-manifest.git -b REVISION</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>To check out the code base for a specific release, please run the following command and use the branch name for that product as REVISION and the manifest as NAME.xml.</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">repo init -u https://github.com/TinkerBoard-Linux/rockchip-linux-manifest.git -b REVISION -m NAME.xml</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>For Tinker OS Android:</p>
<p>To check out the latest code for a product, please run the following command and use the branch name for that product as REVISION.</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">repo init -u https://github.com/TinkerBoard-Android/rockchip-android-manifest.git -b REVISION</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>To check out the code base for a specific release, please run the following command and use the branch name for that product as REVISION and the manifest as NAME.xml.</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">repo init -u https://github.com/TinkerBoard-Android/rockchip-android-manifest.git -b REVISION -m NAME.xml</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Here REVISON is the manifest branch for the product and NAME.xml is the manifest file for the release. Regarding the branches and manifests for each project, please refer to <a href="/docs/tinker-os-releases">Tinker OS Releaes</a>.</p>
<p>To download the code base source tree to your working directory from the repositories as specified in the default manifest, run:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">repo sync</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="building-the-code">Building the code<a href="#building-the-code" class="hash-link" aria-label="Direct link to Building the code" title="Direct link to Building the code">​</a></h2>
<p>There are Dockerfile and scripts provided to establish a build environment. Please refer to <a href="https://docs.docker.com/engine/install/ubuntu/" target="_blank" rel="noopener noreferrer">Install Docker Engine on Ubuntu</a> to install Docker Engine on Ubuntu.</p>
<p>To build the code, go to to the directory where you have downloaded the code base and run the <code>docker-builder-run.sh</code> script. This will take a while to install the necessary packages on the host and build the Docker image.</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">./docker_builder/docker-builder-run.sh</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Once the above is done, the shell of the newly started Docker container is available. You can run commands in the shell to build the code.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="tinker-board-22s">Tinker Board 2/2S<a href="#tinker-board-22s" class="hash-link" aria-label="Direct link to Tinker Board 2/2S" title="Direct link to Tinker Board 2/2S">​</a></h3>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="tinker-os-debian">Tinker OS Debian<a href="#tinker-os-debian" class="hash-link" aria-label="Direct link to Tinker OS Debian" title="Direct link to Tinker OS Debian">​</a></h4>
<p>To build the image, please run the following commands.</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">./build.sh rockchip_rk3399_tinker_board_2_debian_defconfig</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">VERSION=release ./build.sh</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="tinker-os-yocto">Tinker OS Yocto<a href="#tinker-os-yocto" class="hash-link" aria-label="Direct link to Tinker OS Yocto" title="Direct link to Tinker OS Yocto">​</a></h4>
<p>To build the image, please run the following commands.</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">./build.sh rockchip_rk3399_tinker_board_2_yocto_defconfig</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">./build.sh</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="tinker-os-android">Tinker OS Android<a href="#tinker-os-android" class="hash-link" aria-label="Direct link to Tinker OS Android" title="Direct link to Tinker OS Android">​</a></h4>
<p>To build the image, please run the following commands.</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">source build/envsetup.sh</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">lunch Tinker_Board_2-userdebug</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">./build.sh -UCKAu</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="tinker-board-3n">Tinker Board 3N<a href="#tinker-board-3n" class="hash-link" aria-label="Direct link to Tinker Board 3N" title="Direct link to Tinker Board 3N">​</a></h3>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="tinker-os-debian-1">Tinker OS Debian<a href="#tinker-os-debian-1" class="hash-link" aria-label="Direct link to Tinker OS Debian" title="Direct link to Tinker OS Debian">​</a></h4>
<p>To build the image, please run the following commands.</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">./build.sh rockchip_rk3568_tinker_board_3n_debain_defconfig</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">VERSION=release ./build.sh</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="tinker-os-yocto-1">Tinker OS Yocto<a href="#tinker-os-yocto-1" class="hash-link" aria-label="Direct link to Tinker OS Yocto" title="Direct link to Tinker OS Yocto">​</a></h4>
<p>To build the image, please run the following commands.</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">./build.sh rockchip_rk3568_tinker_board_3n_yocto_defconfig</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">./build.sh</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="tinker-os-android-1">Tinker OS Android<a href="#tinker-os-android-1" class="hash-link" aria-label="Direct link to Tinker OS Android" title="Direct link to Tinker OS Android">​</a></h4>
<p>Initialize the environment with the <code>envsetup.sh</code> script.</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">source build/envsetup.sh</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Run the <code>lunch</code> command to choose <code>Tinker_Board_3N-userdebug</code> as the target to build for Tinker Board 3N.</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">lunch Tinker_Board_3N-userdebug </span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Run the <code>build.sh</code> script to build the code. Here the argument <code>U</code> is provided to build the u-boot, the arguments <code>C</code> and <code>K</code> are provided to build the kernel, the argument <code>A</code> is provided to build the Android, and the argument <code>u</code> is provided to pack all the images. All the images will be stored in the directory rockdev/Image-Tinker_Board_3N.</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">./build.sh -UCKAu</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>You can configure the build number with the argument <code>n</code>. If the argument <code>p</code> is provided, the build output will be moved to the directory IMAGE.</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">./build.sh -UCKAup -n X.Y.Z</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h5 class="anchor anchorWithStickyNavbar_LWe7" id="building-ota-packages">Building OTA packages<a href="#building-ota-packages" class="hash-link" aria-label="Direct link to Building OTA packages" title="Direct link to Building OTA packages">​</a></h5>
<p>You can provide the argument <code>o</code> to build the OTA packages. The target-files.zip archive and the full OTA package will be built out.</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">./build.sh -UCKAou</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Please refer to <a href="https://source.android.com/docs/core/ota/tools" target="_blank" rel="noopener noreferrer">Building OTA packages</a> to build full updates and incremental updates.</p>
<h5 class="anchor anchorWithStickyNavbar_LWe7" id="ab-boot">A/B boot<a href="#ab-boot" class="hash-link" aria-label="Direct link to A/B boot" title="Direct link to A/B boot">​</a></h5>
<p>To enable the A/B boot, the following modification needs to be applied.</p>
<ul>
<li>
<p>u-boot</p>
<p>In the directory u-boot, make sure the config CONFIG_ANDROID_AB is enabled.</p>
</li>
</ul>
<div class="language-diff codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-diff codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">diff --git a/configs/tinker_board_3n_defconfig b/configs/tinker_board_3n_defconfig</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">index a7b28f952b..6779b1a11e 100644</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">--- a/configs/tinker_board_3n_defconfig</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">+++ b/configs/tinker_board_3n_defconfig</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@@ -32,6 +32,7 @@ CONFIG_SYS_CONSOLE_INFO_QUIET=y</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> # CONFIG_DISPLAY_CPUINFO is not set</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> CONFIG_ANDROID_BOOTLOADER=y</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> CONFIG_ANDROID_AVB=y</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">+CONFIG_ANDROID_AB=y</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> CONFIG_ANDROID_BOOT_IMAGE_HASH=y</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> CONFIG_SPL_BOARD_INIT=y</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> # CONFIG_SPL_RAW_IMAGE_SUPPORT is not set</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<ul>
<li>
<p>device/asus/tinker_board_3</p>
<p>In the directory device/asus/tinker_board_3, change the flag BOARD_USES_AB_IMAGE to true.</p>
</li>
</ul>
<div class="language-diff codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-diff codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">diff --git a/Tinker_Board_3N/BoardConfig.mk b/Tinker_Board_3N/BoardConfig.mk</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">index 59d3f8a..d19d66d 100644</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">--- a/Tinker_Board_3N/BoardConfig.mk</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">+++ b/Tinker_Board_3N/BoardConfig.mk</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@@ -17,7 +17,7 @@ include device/asus/tinker_board_3/BoardConfig.mk</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> BUILD_WITH_GO_OPT := false</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> # AB image definition</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">-BOARD_USES_AB_IMAGE := false</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">+BOARD_USES_AB_IMAGE := true</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> BOARD_ROCKCHIP_VIRTUAL_AB_ENABLE := false</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> ifeq ($(strip $(BOARD_USES_AB_IMAGE)), true)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<ul>
<li>Provide the argument <code>B</code> when running the <code>build.sh</code> script.</li>
</ul>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">./build.sh -UCKABu</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h5 class="anchor anchorWithStickyNavbar_LWe7" id="creating-a-new-partition-for-ab-boot">Creating a new partition for A/B boot<a href="#creating-a-new-partition-for-ab-boot" class="hash-link" aria-label="Direct link to Creating a new partition for A/B boot" title="Direct link to Creating a new partition for A/B boot">​</a></h5>
<p>Here is the example to create a new partition persist for A/B boot and the partition will be mounted on /persist.</p>
<ul>
<li>
<p>device/asus/common</p>
<p>In the directory device/asus/common, edit the <code>mkimage_ab.sh</code> script to create the persist.img file. The initial data could also be added here.</p>
</li>
</ul>
<div class="language-diff codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-diff codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">diff --git a/mkimage_ab.sh b/mkimage_ab.sh</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">index 7bfcf27..2e5efe0 100755</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">--- a/mkimage_ab.sh</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">+++ b/mkimage_ab.sh</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@@ -313,4 +313,14 @@ rm -rf $IMAGE_PATH/.tmp</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> echo &quot;done.&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> fi</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">+echo -n &quot;create persist.img&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">+dd if=/dev/zero of=$IMAGE_PATH/persist.img count=2000 bs=8k</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">+mkdosfs $IMAGE_PATH/persist.img</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">+# You can uncomment the followings to put some initial files if needed.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">+#mkdir $IMAGE_PATH/.tmp</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">+#sudo mount $IMAGE_PATH/persist.img $IMAGE_PATH/.tmp</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">+#sudo umount $IMAGE_PATH/.tmp</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">+#rm -rf $IMAGE_PATH/.tmp</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">+echo &quot;done.&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">+</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> chmod a+r -R $IMAGE_PATH/</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<ul>
<li>
<p>device/asus/tinker_board_3</p>
<p>In the directory device/asus/tinker_board_3:</p>
<ul>
<li>Edit the <code>RebuildParameter.mk</code> file to add the partition persist into the partition_list.</li>
<li>Edit the <code>Tinker_Board_3N/fstab.in</code> file and the <code>Tinker_Board_3N/recovery.fstab_AB</code> file to add the partition /dev/block/by-name/persist.</li>
<li>Edit the <code>sepolicy/dtoverlay/file_contexts</code> file to configure SELinux for the partition /dev/block/by-name/persist.</li>
</ul>
</li>
</ul>
<div class="language-diff codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-diff codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">diff --git a/RebuildParameter.mk b/RebuildParameter.mk</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">index 95796c2..8c3e6c5 100644</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">--- a/RebuildParameter.mk</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">+++ b/RebuildParameter.mk</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@@ -38,6 +38,8 @@ partition_list := $(partition_list),splash:16M</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> # Added by ASUS: dtoverlay partition</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> partition_list := $(partition_list),dtoverlay:16M</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">+partition_list := $(partition_list),persist:16M</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">+</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> ifeq ($(strip $(BOARD_SUPER_PARTITION_GROUPS)),rockchip_dynamic_partitions)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> partition_list := $(partition_list),super:$(BOARD_SUPER_PARTITION_SIZE)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> else # BOARD_USE_DYNAMIC_PARTITIONS</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">diff --git a/Tinker_Board_3N/fstab.in b/Tinker_Board_3N/fstab.in</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">index 89348c2..e8c9696 100755</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">--- a/Tinker_Board_3N/fstab.in</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">+++ b/Tinker_Board_3N/fstab.in</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@@ -26,6 +26,7 @@ ${_block_prefix}odm     /odm      ext4 ro,barrier=1 ${_flags},first_stage_mount</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> # Added by ASUS</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> /dev/block/by-name/splash       /splash             emmc      defaults     defaults</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> /dev/block/by-name/dtoverlay    /dtoverlay          vfat      defaults     defaults</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">+/dev/block/by-name/persist    /persist         vfat      defaults     defaults</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> #  Full disk encryption has less effect on rk3326, so default to enable this.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> /dev/block/by-name/userdata /data f2fs noatime,nosuid,nodev,discard,reserve_root=32768,resgid=1065 latemount,wait,check,fileencryption=aes-256-xts:aes-256-cts:v2+inlinecrypt_optimized,keydirectory=/metadata/vold/metadata_encryption,quota,formattable,reservedsize=128M,checkpoint=fs</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">diff --git a/Tinker_Board_3N/recovery.fstab_AB b/Tinker_Board_3N/recovery.fstab_AB</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">index e4b65c6..4478d16 100644</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">--- a/Tinker_Board_3N/recovery.fstab_AB</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">+++ b/Tinker_Board_3N/recovery.fstab_AB</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@@ -24,3 +24,4 @@ odm_dlkm    /odm_dlkm    ext4 ro,barrier=1 wait,slotselect,logical,first_stage_m</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> # Added by ASUS</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> /dev/block/by-name/splash           /splash                emmc             defaults                  defaults</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> /dev/block/by-name/dtoverlay           /dtoverlay                vfat             defaults                  defaults</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">+/dev/block/by-name/persist    /persist         vfat      defaults     defaults</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">diff --git a/sepolicy/dtoverlay/file_contexts b/sepolicy/dtoverlay/file_contexts</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">index fd6a17f..75c0564 100644</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">--- a/sepolicy/dtoverlay/file_contexts</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">+++ b/sepolicy/dtoverlay/file_contexts</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@@ -1,3 +1,6 @@</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> /dtoverlay(/.*)?                u:object_r:vfat:s0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> /dev/block/by-name/dtoverlay    u:object_r:userdata_block_device:s0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">+</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">+/persist(/.*)?                u:object_r:vfat:s0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">+/dev/block/by-name/persist    u:object_r:userdata_block_device:s0</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<ul>
<li>
<p>RKTools</p>
<p>In the directory RKTools, add the partition persist using the image persist.img.</p>
</li>
</ul>
<div class="language-diff codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-diff codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">diff --git a/linux/Linux_Pack_Firmware/rockdev/package-file-Tinker_Board_3N-ab b/linux/Linux_Pack_Firmware/rockdev/package-file-Tinker_Board_3N-ab</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">index 1cf0780..17489b5 100755</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">--- a/linux/Linux_Pack_Firmware/rockdev/package-file-Tinker_Board_3N-ab</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">+++ b/linux/Linux_Pack_Firmware/rockdev/package-file-Tinker_Board_3N-ab</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@@ -13,6 +13,7 @@ dtbo_a      Image/dtbo.img</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> dtbo_b      Image/dtbo.img</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> splash      Image/splash.img</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> dtoverlay   Image/dtoverlay.img</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">+persist   Image/persist.img</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> vbmeta_a    Image/vbmeta.img</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> vbmeta_b    Image/vbmeta.img</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> baseparameter    Image/baseparameter.img</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<ul>
<li>
<p>system/core</p>
<p>In the directory system/core, edit the <code>rootdir/Android.mk</code> file to mount the partition persist on /persist.</p>
</li>
</ul>
<div class="language-diff codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-diff codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">diff --git a/rootdir/Android.mk b/rootdir/Android.mk</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">index 63a1a484b..39cea748d 100644</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">--- a/rootdir/Android.mk</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">+++ b/rootdir/Android.mk</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@@ -116,6 +116,8 @@ ifdef BOARD_USES_DTOVERLAY_PARTITION</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   LOCAL_POST_INSTALL_CMD += ; mkdir -p $(TARGET_ROOT_OUT)/dtoverlay</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> endif</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">+LOCAL_POST_INSTALL_CMD += ; mkdir -p $(TARGET_ROOT_OUT)/persist</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">+</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> # For /odm partition.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> LOCAL_POST_INSTALL_CMD += ; mkdir -p $(TARGET_ROOT_OUT)/odm</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> # For Treble Generic System Image (GSI), system-as-root GSI needs to work on</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h5 class="anchor anchorWithStickyNavbar_LWe7" id="secure-boot">Secure boot<a href="#secure-boot" class="hash-link" aria-label="Direct link to Secure boot" title="Direct link to Secure boot">​</a></h5>
<p>To enable the secure boot, the following modification needs to be applied.</p>
<div class="theme-admonition theme-admonition-caution admonition_xJq3 alert alert--warning"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>caution</div><div class="admonitionContent_BuS1"><p>If the secure boot is eanbled, the device can not boot with any other images which are not signed by the same keys used to enable the secure boot.</p></div></div>
<ul>
<li>
<p>u-boot</p>
<p>In the directory u-boot, make sure the configs CONFIG_FIT_SIGNATURE, CONFIG_SPL_FIT_SIGNATURE, and CONFIG_AVB_VBMETA_PUBLIC_KEY_VALIDATE are enabled. You can also enable the config CONFIG_SPL_FIT_ROLLBACK_PROTECT to enable the u-boot rollback protection.</p>
</li>
</ul>
<div class="language-diff codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-diff codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">diff --git a/configs/tinker_board_3n_defconfig b/configs/tinker_board_3n_defconfig</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">index a7b28f952b..1428a5abb5 100644</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">--- a/configs/tinker_board_3n_defconfig</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">+++ b/configs/tinker_board_3n_defconfig</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@@ -220,3 +221,6 @@ CONFIG_RK_AVB_LIBAVB_USER=y</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> CONFIG_OPTEE_CLIENT=y</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> CONFIG_OPTEE_V2=y</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> CONFIG_OPTEE_ALWAYS_USE_SECURITY_PARTITION=y</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">+CONFIG_FIT_SIGNATURE=y</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">+CONFIG_SPL_FIT_SIGNATURE=y</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">+CONFIG_AVB_VBMETA_PUBLIC_KEY_VALIDATE=y</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Generate keys in the directory u-boot. (You only need to do this once if you don&#x27;t have the keys generated.)</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">cd u-boot</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">mkdir -p keys</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">../rkbin/tools/rk_sign_tool kk --bits 2048 --out . </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">mv private_key.pem keys/dev.key &amp;&amp; mv public_key.pem keys/dev.pubkey</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">openssl req -batch -new -x509 -key keys/dev.key -out keys/dev.crt</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">cd ..</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Once the keys are ready, build and sign the u-boot by providing the argument <code>--spl-new</code> and make it able to enable the secure boot automaticall by providing the arguement <code>--burn-key-hash</code>.</p>
<div class="theme-admonition theme-admonition-danger admonition_xJq3 alert alert--danger"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M5.05.31c.81 2.17.41 3.38-.52 4.31C3.55 5.67 1.98 6.45.9 7.98c-1.45 2.05-1.7 6.53 3.53 7.7-2.2-1.16-2.67-4.52-.3-6.61-.61 2.03.53 3.33 1.94 2.86 1.39-.47 2.3.53 2.27 1.67-.02.78-.31 1.44-1.13 1.81 3.42-.59 4.78-3.42 4.78-5.56 0-2.84-2.53-3.22-1.25-5.61-1.52.13-2.03 1.13-1.89 2.75.09 1.08-1.02 1.8-1.86 1.33-.67-.41-.66-1.19-.06-1.78C8.18 5.31 8.68 2.45 5.05.32L5.03.3l.02.01z"></path></svg></span>danger</div><div class="admonitionContent_BuS1"><p>--burn-key-hash: If this arguemnt is provided, the secure boot for this SoC will be enabled during the 1st boot-up automatically after the image is installed. Then, the device can not boot with any other images which are not signed by the same keys. Suggest you only do this for the secure boot enablement and use the arguemnt <code>--spl-new</code> to sign the image without the argument <code>--burn-key-hash</code>.</p></div></div>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">cd u-boot</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">./make.sh tinker_board_3n --spl-new --burn-key-hash</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">cd ..</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Or only to build and sign the u-boot by providing the argument <code>--spl-new</code></p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">cd u-boot</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">./make.sh tinker_board_3n --spl-new</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">cd ..</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>If the config CONFIG_SPL_FIT_ROLLBACK_PROTECT is enable to enable the u-boot rollback protection. You will need to provide the argemeny <code>-version-uboot</code> and <code>--rollback-index-uboot</code>.</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">cd u-boot</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">./make.sh tinker_board_3n --spl-new --version-uboot 0 --rollback-index-uboot 1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">cd ..</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Then, build the rest without re-building u-boot by removing the argument <code>U</code>.</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">./build.sh -CKABu</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Once the device boots up with the signed image, you can see the console log as the following.</p>
<div class="language-console codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-console codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">U-Boot SPL 2017.09-dirty #android (May 16 2023 - 16:36:29) </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">… </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Trying fit image at 0x4000 sector </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">## Verified-boot: 1 </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">sha256,rsa2048:dev## Verified-boot: 1 </span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>You can also use the adb command to get the property vendor.secureboot and it will be true if the secure boot is enabled.</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">adb shell getprop | grep &quot;vendor.secureboot&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[vendor.secureboot]: [true]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h5 class="anchor anchorWithStickyNavbar_LWe7" id="android-verified-boot">Android verified boot<a href="#android-verified-boot" class="hash-link" aria-label="Direct link to Android verified boot" title="Direct link to Android verified boot">​</a></h5>
<p>To enable the Android verified boot, the following modification needs to be applied.</p>
<ul>
<li>
<p>external/avb</p>
<p>In the directory externa/avb, edit the <code>test/avb_atx_generate_test_data</code> file to change the product ID.</p>
</li>
</ul>
<div class="language-diff codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-diff codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">diff --git a/test/avb_atx_generate_test_data b/test/avb_atx_generate_test_data</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">index 1b8bb2b..83016ad 100755</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">--- a/test/avb_atx_generate_test_data</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">+++ b/test/avb_atx_generate_test_data</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@@ -48,7 +48,7 @@ AVBTOOL=$(dirname &quot;$0&quot;)/../avbtool</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> echo AVBTOOL = ${AVBTOOL}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> # Get a zero product ID.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">-echo 00000000000000000000000000000000 | xxd -r -p - atx_product_id.bin</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">+echo 000000000000000000000000000000123 | xxd -r -p - atx_product_id.bin</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> # Generate key pairs.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> if [ ! -f testkey_atx_prk.pem ]; then</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<ul>
<li>Remove the default test keys and generate new atx_permanent_attributes.bin , atx_metadata.bin, testkey_atx_pik.pem, testkey_atx_prk.pem, testkey_atx_psk.pem, testkey_atx_puk.pem, atx_unlock_challenge.bin, atx_unlock_credential.bin stored in the external/avb/test/data directory. (You only need to do this once if you don&#x27;t have these generated.)</li>
</ul>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">cd external/avb/test/data</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">rm testkey_atx_p*</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">../avb_atx_generate_test_data</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<ul>
<li>
<p>u-boot</p>
<p>In the directory u-boot, make sure the configs CONFIG_AVB_VBMETA_PUBLIC_KEY_VALIDATE and CONFIG_RK_AVB_LIBAVB_ENABLE_ATH_UNLOCK are enabled. You can also enable the config CONFIG_FIT_ROLLBACK_PROTECT to enable the rollback protection.</p>
</li>
</ul>
<div class="language-diff codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-diff codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">diff --git a/configs/tinker_board_3n_defconfig b/configs/tinker_board_3n_defconfig</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">index a7b28f952b..4f7502fdf9 100644</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">--- a/configs/tinker_board_3n_defconfig</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">+++ b/configs/tinker_board_3n_defconfig</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@@ -220,3 +220,5 @@ CONFIG_RK_AVB_LIBAVB_USER=y</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> CONFIG_OPTEE_CLIENT=y</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> CONFIG_OPTEE_V2=y</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> CONFIG_OPTEE_ALWAYS_USE_SECURITY_PARTITION=y</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">+CONFIG_AVB_VBMETA_PUBLIC_KEY_VALIDATE=y</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">+CONFIG_RK_AVB_LIBAVB_ENABLE_ATH_UNLOCK=y</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<div class="theme-admonition theme-admonition-danger admonition_xJq3 alert alert--danger"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M5.05.31c.81 2.17.41 3.38-.52 4.31C3.55 5.67 1.98 6.45.9 7.98c-1.45 2.05-1.7 6.53 3.53 7.7-2.2-1.16-2.67-4.52-.3-6.61-.61 2.03.53 3.33 1.94 2.86 1.39-.47 2.3.53 2.27 1.67-.02.78-.31 1.44-1.13 1.81 3.42-.59 4.78-3.42 4.78-5.56 0-2.84-2.53-3.22-1.25-5.61-1.52.13-2.03 1.13-1.89 2.75.09 1.08-1.02 1.8-1.86 1.33-.67-.41-.66-1.19-.06-1.78C8.18 5.31 8.68 2.45 5.05.32L5.03.3l.02.01z"></path></svg></span>danger</div><div class="admonitionContent_BuS1"><p>If the AVB key is embeded in th u-boot, the AVB for this SoC will be enabled during the 1st boot-up automatically after the image is installed. Suggest you only do this for the AVB enablement.</p></div></div>
<ul>
<li>Embed the AVB key in the u-boot to write the key automatically during the 1st boot-up automatically after the image is installed.<!-- -->
<ul>
<li>Apply the patch to embed the AVB key in to the u-boot and extract the public key.</li>
<li>Edit the <code>lib/avb/libavb_user/avb_ops_user.c</code> file to replace the data of avb_root_pub[] with the data of avb_root_pub_bin in avb_root_pub.h extracted.</li>
</ul>
</li>
</ul>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">cd u-boot</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">git apply ../RKDocs/common/security/patch/u-boot/0001-avb-add-embedded-key.patch</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">cd -</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">cd external/avb</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">./avbtool extract_public_key --key test/data/testkey_atx_psk.pem --output avb_root_pub.bin $ xxd -i avb_root_pub.bin &gt; test/data/avb_root_pub.h</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">cd -</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<ul>
<li>
<p>device/asus/tinker_board_3</p>
<p>In the directory device/asus/tinker_board_3, make sure the config BOARD_AVB_ENABLE is enabled and the configs BOARD_AVB_ALGORITHM, BOARD_AVB_KEY_PATH, and BOARD_AVB_METADATA_BIN_PATH are defined. You can also define BOARD_AVB_ROLLBACK_INDEX to enable the rollback protection and this will need CONFIG_FIT_ROLLBACK_PROTECT to be enabled for u-boot as well.</p>
</li>
</ul>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">diff --git a/BoardConfig.mk b/BoardConfig.mk</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">index 6ce3cd7..33f515b 100644</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">--- a/BoardConfig.mk</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">+++ b/BoardConfig.mk</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@@ -22,7 +22,10 @@ PRODUCT_KERNEL_ARCH ?= arm64</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> #PRODUCT_KERNEL_DTS ?= rk3568-tinker_board_3</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> #PRODUCT_KERNEL_CONFIG ?= tinker_board_3_defconfig</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">-# BOARD_AVB_ENABLE := true</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">+BOARD_AVB_ENABLE := true</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">+BOARD_AVB_ALGORITHM := SHA256_RSA4096</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">+BOARD_AVB_KEY_PATH := external/avb/test/data/testkey_atx_psk.pem</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">+BOARD_AVB_METADATA_BIN_PATH := external/avb/test/data/atx_metadata.bin</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> # used for fstab_generator, sdmmc controller address</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> PRODUCT_BOOT_DEVICE := fe310000.sdhci,fe330000.nandc,fe2b0000.dwmmc</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Once the device boots up with the AVB enabled image, you can see the console log as the following.</p>
<div class="language-console codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-console codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Console log in uboot stage:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Vboot=0, AVB images, AVB verify</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">read_is_device_unlocked() ops returned that device is LOCKED</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>You can also use the adb command to get the property ro.boot.verifiedbootstate and it will be green if the image is verified OK.</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">adb shell getprop | grep &quot;ro.boot.verifiedbootstate&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[ro.boot.verifiedbootstate]: [green]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/TinkerBoard/tinkerboard.github.io/tree/main/docs/developer-guide.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_vwxv"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/user-guide"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">User Guide</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/tinker-os-releases"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Tinker OS Releases</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#source-control-tools" class="table-of-contents__link toc-highlight">Source control tools</a></li><li><a href="#downloading-the-source" class="table-of-contents__link toc-highlight">Downloading the source</a></li><li><a href="#building-the-code" class="table-of-contents__link toc-highlight">Building the code</a><ul><li><a href="#tinker-board-22s" class="table-of-contents__link toc-highlight">Tinker Board 2/2S</a></li><li><a href="#tinker-board-3n" class="table-of-contents__link toc-highlight">Tinker Board 3N</a></li></ul></li></ul></div></div></div></div></main></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Documentation</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/docs/getting-started">Getting Started</a></li></ul></div><div class="col footer__col"><div class="footer__title">ASUS</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://www.asus.com" target="_blank" rel="noopener noreferrer" class="footer__link-item">ASUS<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://iot.asus.com" target="_blank" rel="noopener noreferrer" class="footer__link-item">ASUS IoT<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">Tinker Board Series</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://tinker-board.asus.com" target="_blank" rel="noopener noreferrer" class="footer__link-item">Tinker Board Website<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://github.com/TinkerBoard/TinkerBoard/wiki/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Tinker Board Wiki<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://tinker-board.asus.com/forum/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Tinker Board Forum<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/blog">Blog</a></li><li class="footer__item"><a href="https://github.com/TinkerBoard/" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub - Linux<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://github.com/TinkerBoard-Android/" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub - Android<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2023 ASUSTeK Computer Inc. Built with Docusaurus.</div></div></div></footer></div>
</body>
</html>